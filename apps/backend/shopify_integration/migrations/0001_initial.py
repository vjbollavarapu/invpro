# Generated by Django 5.1.1 on 2025-11-08 17:47

import django.core.validators
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
    ]

    operations = [
        migrations.CreateModel(
            name='ShopifyCustomer',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('tenant_id', models.UUIDField(db_index=True, help_text='Tenant ID for multi-tenant isolation')),
                ('shopify_customer_id', models.CharField(db_index=True, max_length=64)),
                ('email', models.EmailField(blank=True, max_length=254)),
                ('first_name', models.CharField(blank=True, max_length=100)),
                ('last_name', models.CharField(blank=True, max_length=100)),
                ('phone', models.CharField(blank=True, max_length=32)),
                ('state', models.CharField(blank=True, max_length=64)),
                ('tags', models.TextField(blank=True)),
                ('addresses', models.JSONField(blank=True, default=list)),
                ('default_address', models.JSONField(blank=True, default=dict)),
                ('total_spent', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('orders_count', models.IntegerField(default=0)),
                ('last_order_id', models.CharField(blank=True, max_length=64)),
                ('last_order_name', models.CharField(blank=True, max_length=128)),
                ('raw_data', models.JSONField(blank=True, default=dict)),
                ('synced_at', models.DateTimeField(blank=True, null=True)),
            ],
            options={
                'ordering': ['-synced_at', 'email'],
            },
        ),
        migrations.CreateModel(
            name='ShopifyIntegration',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('tenant_id', models.UUIDField(db_index=True, help_text='Tenant ID for multi-tenant isolation')),
                ('store_url', models.CharField(help_text='Primary Shopify store URL (e.g. https://mystore.myshopify.com)', max_length=255, validators=[django.core.validators.URLValidator()])),
                ('api_key', models.CharField(help_text='Private app API key', max_length=255)),
                ('api_secret', models.CharField(help_text='Private app API secret', max_length=255)),
                ('access_token', models.CharField(blank=True, help_text='Generated access token after OAuth flow', max_length=255)),
                ('scopes', models.TextField(blank=True, help_text='Granted API scopes, comma separated')),
                ('api_version', models.CharField(default='2024-10', help_text='Shopify API version used for requests', max_length=20)),
                ('status', models.CharField(choices=[('DISCONNECTED', 'Disconnected'), ('CONNECTED', 'Connected'), ('SYNCING', 'Syncing'), ('ERROR', 'Error'), ('PAUSED', 'Paused')], db_index=True, default='DISCONNECTED', max_length=32)),
                ('webhook_secret', models.CharField(blank=True, help_text='Secret used to verify webhook signatures', max_length=255)),
                ('auto_sync_enabled', models.BooleanField(default=True, help_text='Automatically run background synchronization tasks')),
                ('sync_products', models.BooleanField(default=True)),
                ('sync_orders', models.BooleanField(default=True)),
                ('sync_customers', models.BooleanField(default=True)),
                ('sync_inventory', models.BooleanField(default=True)),
                ('last_sync_at', models.DateTimeField(blank=True, null=True)),
                ('last_successful_sync', models.DateTimeField(blank=True, null=True)),
                ('last_error_at', models.DateTimeField(blank=True, null=True)),
                ('last_error_message', models.TextField(blank=True)),
                ('sync_frequency_minutes', models.PositiveIntegerField(default=15, help_text='Desired background sync frequency')),
            ],
            options={
                'verbose_name': 'Shopify Integration',
                'verbose_name_plural': 'Shopify Integrations',
            },
        ),
        migrations.CreateModel(
            name='ShopifyInventoryLevel',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('tenant_id', models.UUIDField(db_index=True, help_text='Tenant ID for multi-tenant isolation')),
                ('shopify_inventory_item_id', models.CharField(max_length=64)),
                ('shopify_location_id', models.CharField(max_length=64)),
                ('sku', models.CharField(blank=True, max_length=128)),
                ('available', models.IntegerField(default=0)),
                ('committed', models.IntegerField(default=0)),
                ('incoming', models.IntegerField(default=0)),
                ('shopify_updated_at', models.DateTimeField(blank=True, null=True)),
                ('raw_data', models.JSONField(blank=True, default=dict)),
                ('synced_at', models.DateTimeField(blank=True, null=True)),
            ],
            options={
                'verbose_name': 'Shopify Inventory Level',
                'verbose_name_plural': 'Shopify Inventory Levels',
            },
        ),
        migrations.CreateModel(
            name='ShopifyOrder',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('tenant_id', models.UUIDField(db_index=True, help_text='Tenant ID for multi-tenant isolation')),
                ('shopify_order_id', models.CharField(db_index=True, max_length=64)),
                ('shopify_order_number', models.CharField(blank=True, max_length=64)),
                ('name', models.CharField(help_text='Human-readable order name', max_length=128)),
                ('email', models.EmailField(blank=True, max_length=254)),
                ('financial_status', models.CharField(blank=True, max_length=64)),
                ('fulfillment_status', models.CharField(blank=True, max_length=64)),
                ('currency', models.CharField(default='USD', max_length=16)),
                ('total_price', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('subtotal_price', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('total_tax', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('total_discounts', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('processed_at', models.DateTimeField(blank=True, null=True)),
                ('closed_at', models.DateTimeField(blank=True, null=True)),
                ('cancelled_at', models.DateTimeField(blank=True, null=True)),
                ('shipping_address', models.JSONField(blank=True, default=dict)),
                ('billing_address', models.JSONField(blank=True, default=dict)),
                ('line_items', models.JSONField(blank=True, default=list)),
                ('customer_data', models.JSONField(blank=True, default=dict)),
                ('raw_data', models.JSONField(blank=True, default=dict)),
                ('synced_at', models.DateTimeField(blank=True, null=True)),
            ],
            options={
                'ordering': ['-processed_at', '-created_at'],
            },
        ),
        migrations.CreateModel(
            name='ShopifyProduct',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('tenant_id', models.UUIDField(db_index=True, help_text='Tenant ID for multi-tenant isolation')),
                ('shopify_product_id', models.CharField(help_text='Shopify product ID', max_length=64)),
                ('title', models.CharField(max_length=255)),
                ('status', models.CharField(default='active', max_length=32)),
                ('product_type', models.CharField(blank=True, max_length=128)),
                ('vendor', models.CharField(blank=True, max_length=128)),
                ('tags', models.TextField(blank=True)),
                ('handle', models.SlugField(blank=True, max_length=255)),
                ('body_html', models.TextField(blank=True)),
                ('options', models.JSONField(blank=True, default=list)),
                ('variants', models.JSONField(blank=True, default=list)),
                ('images', models.JSONField(blank=True, default=list)),
                ('price_min', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True)),
                ('price_max', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True)),
                ('raw_data', models.JSONField(blank=True, default=dict)),
                ('synced_at', models.DateTimeField(blank=True, null=True)),
                ('published_at', models.DateTimeField(blank=True, null=True)),
            ],
            options={
                'ordering': ['title'],
            },
        ),
        migrations.CreateModel(
            name='ShopifySyncLog',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('tenant_id', models.UUIDField(db_index=True, help_text='Tenant ID for multi-tenant isolation')),
                ('entity', models.CharField(choices=[('products', 'Products'), ('orders', 'Orders'), ('customers', 'Customers'), ('inventory', 'Inventory'), ('full', 'Full Sync')], max_length=32)),
                ('status', models.CharField(choices=[('started', 'Started'), ('success', 'Success'), ('error', 'Error'), ('partial', 'Partial Success')], default='started', max_length=16)),
                ('started_at', models.DateTimeField(auto_now_add=True)),
                ('finished_at', models.DateTimeField(blank=True, null=True)),
                ('duration_ms', models.PositiveIntegerField(default=0)),
                ('records_fetched', models.PositiveIntegerField(default=0)),
                ('records_processed', models.PositiveIntegerField(default=0)),
                ('records_created', models.PositiveIntegerField(default=0)),
                ('records_updated', models.PositiveIntegerField(default=0)),
                ('records_failed', models.PositiveIntegerField(default=0)),
                ('message', models.TextField(blank=True)),
                ('details', models.JSONField(blank=True, default=dict)),
            ],
            options={
                'verbose_name': 'Shopify Sync Log',
                'verbose_name_plural': 'Shopify Sync Logs',
                'ordering': ['-started_at'],
            },
        ),
    ]
